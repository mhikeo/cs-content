testConfigurePostgresConfigWithCommandLineParametersOnRedhatSuccess:
  testSuites: [postgresql,postgresql-configuration]
  testFlowPath: io.cloudslang.postgresql.configuration.test_configure_postgres_on_redhat
  inputs:
    - hostname: 'ec2-107-21-171-41.compute-1.amazonaws.com'
    - username: 'ec2-user'
    - private_key_file: './rhel-psql-aws.pem'
    - max_connections: '99'
    - listen_addresses: "'localhost'"
    - port: '5432'
    - shared_buffers: '129MB'
    - effective_cache_size: '6GB'
    - autovacuum: 'off'
    - work_mem: '6MB'
    - ssl: 'off'
    - ssl_ca_file: ''
    - ssl_cert_file: ''
    - ssl_key_file: ''
    - reboot: 'yes'
  description: >
      Tests that run configure_postgres_on_redhat.sl to update parameters from CLI and finishes with SUCCESS
      Notes:
        ssl_*_file must be existing files or empty values. Otherwise, postgreserver doesn't start after rebooting
        Set 'reboot' = yes to verify updated parameters from a database
  outputs:
    - return_result: |-
        autovacuum|off
        effective_cache_size|786432
        listen_addresses|localhost
        max_connections|99
        port|5432
        shared_buffers|16512
        ssl|off
        ssl_ca_file|
        ssl_cert_file|server.crt
        ssl_key_file|server.key
        work_mem|6144
  result: SUCCESS

testConfigurePostgresConfigWithLocalPostgressConfFileOnRedhatSuccess:
  testSuites: [postgresql,postgresql-configuration]
  testFlowPath: io.cloudslang.postgresql.configuration.test_configure_postgres_on_redhat
  inputs:
    - hostname: 'ec2-107-21-171-41.compute-1.amazonaws.com'
    - username: 'ec2-user'
    - private_key_file: './rhel-psql-aws.pem'
    - configuration_file: "C:\\projects\\TopCoder\\CloudSlang-mhikeo\\cs-content-tests\\test\\io\\cloudslang\\postgresql\\postgresql.conf"
    - reboot: 'yes'
  description: >
      Tests that run configure_postgres_on_redhat.sl to update parameters from CLI and finishes with SUCCESS
      Notes:
        'configuration_file' must be the absolute file path
        Set 'reboot' = yes to verify updated parameters from a postgres database
  outputs:
    - return_result: |-
        autovacuum|off
        effective_cache_size|917504
        listen_addresses|localhost
        max_connections|99
        port|5432
        shared_buffers|16512
        ssl|off
        ssl_ca_file|
        ssl_cert_file|server.crt
        ssl_key_file|server.key
        work_mem|7168
  result: SUCCESS

testConfigurePgHbaConfigWithLocalPostgressConfFileOnRedhatSuccess:
  testSuites: [postgresql,postgresql-configuration]
  testFlowPath: io.cloudslang.postgresql.configuration.test_configure_postgres_on_redhat
  inputs:
    - hostname: 'ec2-107-21-171-41.compute-1.amazonaws.com'
    - username: 'ec2-user'
    - private_key_file: './rhel-psql-aws.pem'
    - configuration_file: "C:\\projects\\TopCoder\\CloudSlang-mhikeo\\cs-content-tests\\test\\io\\cloudslang\\postgresql\\pg_hba.conf"
  description: >
      Tests that run configure_postgres_on_redhat.sl to update pg_hba.conf from CLI and finishes with SUCCESS
      Notes:
        'configuration_file' must be the absolute file path
  outputs:
  result: SUCCESS

testConfigurePgHbaConfigWithCommandLineParametersOnRedhatSuccess:
  testSuites: [postgresql,postgresql-configuration]
  testFlowPath: io.cloudslang.postgresql.configuration.test_configure_postgres_on_redhat
  inputs:
    - hostname: 'ec2-107-21-171-41.compute-1.amazonaws.com'
    - username: 'ec2-user'
    - private_key_file: './rhel-psql-aws.pem'
    - allowed_users: 'all'
    - allowed_hosts: 'local'
  description: >
      Tests that run configure_postgres_on_redhat.sl to update pg_hba.conf from CLI and finishes with SUCCESS
      Notes:
        'configuration_file' must be the absolute file path
  outputs:
  result: SUCCESS

testConfigurePostgresWithNonExistinglocalConfigurationFileOnRedhatFailure:
  testSuites: [postgresql,postgresql-configuration]
  testFlowPath: io.cloudslang.postgresql.configuration.test_configure_postgres_on_redhat
  inputs:
    - hostname: 'ec2-107-21-171-41.compute-1.amazonaws.com'
    - username: 'ec2-user'
    - private_key_file: './rhel-psql-aws.pem'
    - configuration_file: "./some.conf"
    - reboot: 'yes'
  description: >
      Tests that run configure_postgres_on_redhat.sl to update parameters with non-existing config file and finishes with FAILURE
  outputs:
    - exception: "./some.conf: No such file or directory"
  result: FAILURE

